<p id="notice"><%= notice %></p>

<% provide(:title, "Civil Servants") %>

<table class='main_table'>
  <thead>
    <tr class='details_head_row'>
      <th>Name</th>
      <th>Staff number</th>
      <th>Job title</th>
      <th>Community</th>
      <th>Grade</th>
      <th>Profession</th>
      <th>Framework</th>
      <th>Status</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @civil_servants.each do |civil_servant| %>
      <tr>
        <td><%= civil_servant.name %></td>
        <td><%= civil_servant.staff_number %></td>
        <td><%= civil_servant.job_title %></td>
        <td><%= civil_servant.community.name %></td>
        <td><%= civil_servant.grade.name %></td>
        <td><%= civil_servant.profession.name %></td>
        <td><%= civil_servant.framework.name %></td>
        <td><%= civil_servant.status.name %></td>
        <td><input type="button" value="Show Details" id="<%= civil_servant.id %>_button" class="show_details"></td>
      </tr>
      <tr style="display:none;background-color:#efefef;" id="<%= civil_servant.id %>">
        <td colspan="9" id="<%= civil_servant.id %>">
          <%= render 'form', civil_servant: civil_servant %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Civil Servant', new_civil_servant_path %>

<script>
$(function(){
  $(".show_details").click(function(){
    var id = $(this).attr("id").replace("_button","");
    if($(this).val() == "Show Details"){
      $("#" + id).show();
      $(this).val("Hide Details");
    } else {
      $("#" + id).hide();
      $(this).val("Show Details");
    }
  });
});
</script>
